"use strict";(globalThis.webpackChunkcomplianz_gdpr=globalThis.webpackChunkcomplianz_gdpr||[]).push([[800,2921,4759,5023],{9957:(e,t,r)=>{function n(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(e?.(n),!1===r||!n.defaultPrevented)return t?.(n)}}r.d(t,{m:()=>n})},10263:(e,t,r)=>{r.d(t,{c:()=>s});var n=r(51609);function s(e){const t=n.useRef(e);return n.useEffect((()=>{t.current=e})),n.useMemo((()=>(...e)=>t.current?.(...e)),[])}},10800:(e,t,r)=>{r.r(t),r.d(t,{default:()=>C});var n=r(86087),s=r(51609),i=r(9957),a=r(91071),c=r(62133),o=r(81351),l=r(85357),d=r(54150),u=r(12579),p=r(10790),h="Switch",[f,g]=(0,c.A)(h),[m,b]=f(h),v=s.forwardRef(((e,t)=>{const{__scopeSwitch:r,name:n,checked:c,defaultChecked:l,required:d,disabled:h,value:f="on",onCheckedChange:g,form:b,...v}=e,[y,_]=s.useState(null),k=(0,a.s)(t,(e=>_(e))),j=s.useRef(!1),S=!y||b||!!y.closest("form"),[C=!1,A]=(0,o.i)({prop:c,defaultProp:l,onChange:g});return(0,p.jsxs)(m,{scope:r,checked:C,disabled:h,children:[(0,p.jsx)(u.sG.button,{type:"button",role:"switch","aria-checked":C,"aria-required":d,"data-state":w(C),"data-disabled":h?"":void 0,disabled:h,value:f,...v,ref:k,onClick:(0,i.m)(e.onClick,(e=>{A((e=>!e)),S&&(j.current=e.isPropagationStopped(),j.current||e.stopPropagation())}))}),S&&(0,p.jsx)(x,{control:y,bubbles:!j.current,name:n,value:f,checked:C,required:d,disabled:h,form:b,style:{transform:"translateX(-100%)"}})]})}));v.displayName=h;var y="SwitchThumb",_=s.forwardRef(((e,t)=>{const{__scopeSwitch:r,...n}=e,s=b(y,r);return(0,p.jsx)(u.sG.span,{"data-state":w(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:t})}));_.displayName=y;var x=e=>{const{control:t,checked:r,bubbles:n=!0,...i}=e,a=s.useRef(null),c=(0,l.Z)(r),o=(0,d.X)(t);return s.useEffect((()=>{const e=a.current,t=window.HTMLInputElement.prototype,s=Object.getOwnPropertyDescriptor(t,"checked").set;if(c!==r&&s){const t=new Event("click",{bubbles:n});s.call(e,r),e.dispatchEvent(t)}}),[c,r,n]),(0,p.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:a,style:{...e.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function w(e){return e?"checked":"unchecked"}var k=v,j=_,S=r(4219);const C=(0,n.memo)((({value:e,onChange:t,required:r,disabled:n,className:s,label:i,id:a})=>{const{getField:c}=(0,S.default)();let o=e;return"0"!==e&&"1"!==e||(o="1"===e),(0,p.jsx)("div",{className:"cmplz-input-group cmplz-switch-group",children:(0,p.jsx)(k,{className:"cmplz-switch-root "+s,checked:o,onCheckedChange:e=>{"banner"===c(a).data_target&&(e=e?"1":"0"),t(e)},disabled:n,required:r,children:(0,p.jsx)(j,{className:"cmplz-switch-thumb"})})})}))},12579:(e,t,r)=>{r.d(t,{hO:()=>o,sG:()=>c});var n=r(51609),s=r(75795),i=r(33362),a=r(10790),c=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce(((e,t)=>{const r=(0,i.TL)(`Primitive.${t}`),s=n.forwardRef(((e,n)=>{const{asChild:s,...i}=e,c=s?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,a.jsx)(c,{...i,ref:n})}));return s.displayName=`Primitive.${t}`,{...e,[t]:s}}),{});function o(e,t){e&&s.flushSync((()=>e.dispatchEvent(t)))}},32921:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});var n=r(27723),s=r(44124),i=r(10790);const a=e=>(0,i.jsxs)(i.Fragment,{children:[" ",(0,i.jsx)(s.default,{url:e,target:"_blank",rel:"noopener noreferrer",text:(0,n.__)("For more information, please read this %sarticle%s.","complianz-gdpr")})," "]})},33362:(e,t,r)=>{r.d(t,{TL:()=>a});var n=r(51609),s=r(91071),i=r(10790);function a(e){const t=c(e),r=n.forwardRef(((e,r)=>{const{children:s,...a}=e,c=n.Children.toArray(s),o=c.find(l);if(o){const e=o.props.children,s=c.map((t=>t===o?n.Children.count(e)>1?n.Children.only(null):n.isValidElement(e)?e.props.children:null:t));return(0,i.jsx)(t,{...a,ref:r,children:n.isValidElement(e)?n.cloneElement(e,void 0,s):null})}return(0,i.jsx)(t,{...a,ref:r,children:s})}));return r.displayName=`${e}.Slot`,r}function c(e){const t=n.forwardRef(((e,t)=>{const{children:r,...i}=e;if(n.isValidElement(r)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}(r),a=function(e,t){const r={...t};for(const n in t){const s=e[n],i=t[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...e)=>{i(...e),s(...e)}:s&&(r[n]=s):"style"===n?r[n]={...s,...i}:"className"===n&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}(i,r.props);return r.type!==n.Fragment&&(a.ref=t?(0,s.t)(t,e):e),n.cloneElement(r,a)}return n.Children.count(r)>1?n.Children.only(null):null}));return t.displayName=`${e}.SlotClone`,t}var o=Symbol("radix.slottable");function l(e){return n.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===o}},34759:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});var n=r(81621),s=r(16535),i=r(9588);const a=(0,n.vt)(((e,t)=>({integrationsLoaded:!1,fetching:!1,services:[],plugins:[],scripts:[],placeholders:[],blockedScripts:[],setScript:(t,r)=>{e((0,s.Ay)((e=>{if("block_script"===r){let r=e.blockedScripts;if(t.urls){for(const[e,n]of Object.entries(t.urls)){if(!n||0===n.length)continue;let e=!1;for(const[t,s]of Object.entries(r))n===t&&(e=!0);e||(r[n]=n)}e.blockedScripts=r}}const n=e.scripts[r].findIndex((e=>e.id===t.id));-1!==n&&(e.scripts[r][n]=t)})))},fetchIntegrationsData:async()=>{if(t().fetching)return;e({fetching:!0});const{services:r,plugins:n,scripts:s,placeholders:i,blocked_scripts:a}=await c();let o=s;o.block_script&&o.block_script.length>0&&o.block_script.forEach(((e,t)=>{e.id=t})),o.add_script&&o.add_script.length>0&&o.add_script.forEach(((e,t)=>{e.id=t})),o.whitelist_script&&o.whitelist_script.length>0&&o.whitelist_script.forEach(((e,t)=>{e.id=t})),e((()=>({integrationsLoaded:!0,services:r,plugins:n,scripts:o,fetching:!1,placeholders:i,blockedScripts:a})))},addScript:r=>{e({fetching:!0}),t().scripts[r]&&Array.isArray(t().scripts[r])||e((0,s.Ay)((e=>{e.scripts[r]=[]}))),e((0,s.Ay)((e=>{e.scripts[r].push({name:"general",id:e.scripts[r].length,enable:!0})})));let n=t().scripts;return i.doAction("update_scripts",{scripts:n}).then((t=>(e({fetching:!1}),t))).catch((e=>{console.error(e)}))},saveScript:(r,n)=>{e({fetching:!0}),t().scripts[n]&&Array.isArray(t().scripts[n])||e((0,s.Ay)((e=>{e.scripts[n]=[]}))),e((0,s.Ay)((e=>{const t=e.scripts[n].findIndex((e=>e.id===r.id));-1!==t&&(e.scripts[n][t]=r)})));let a=t().scripts;return i.doAction("update_scripts",{scripts:a}).then((t=>(e({fetching:!1}),t))).catch((e=>{console.error(e)}))},deleteScript:(r,n)=>{e({fetching:!0}),t().scripts[n]&&Array.isArray(t().scripts[n])||e((0,s.Ay)((e=>{e.scripts[n]=[]}))),e((0,s.Ay)((e=>{const t=e.scripts[n].findIndex((e=>e.id===r.id));-1!==t&&e.scripts[n].splice(t,1)})));let a=t().scripts;return i.doAction("update_scripts",{scripts:a}).then((t=>(e({fetching:!1}),t))).catch((e=>{console.error(e)}))},updatePluginStatus:async(t,r)=>{e({fetching:!0}),e((0,s.Ay)((e=>{const n=e.plugins.findIndex((e=>e.id===t));-1!==n&&(e.plugins[n].enabled=r)})));const n=await i.doAction("update_plugin_status",{plugin:t,enabled:r}).then((e=>e)).catch((e=>{console.error(e)}));return e({fetching:!1}),n},updatePlaceholderStatus:async(t,r,n)=>{e({fetching:!0}),n&&e((0,s.Ay)((e=>{const n=e.plugins.findIndex((e=>e.id===t));-1!==n&&(e.plugins[n].placeholder=r?"enabled":"disabled")})));const a=await i.doAction("update_placeholder_status",{id:t,enabled:r}).then((e=>e)).catch((e=>{console.error(e)}));return e({fetching:!1}),a}}))),c=()=>i.doAction("get_integrations_data",{}).then((e=>e)).catch((e=>{console.error(e)}))},54150:(e,t,r)=>{r.d(t,{X:()=>i});var n=r(51609),s=r(88200);function i(e){const[t,r]=n.useState(void 0);return(0,s.N)((()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const t=new ResizeObserver((t=>{if(!Array.isArray(t))return;if(!t.length)return;const n=t[0];let s,i;if("borderBoxSize"in n){const e=n.borderBoxSize,t=Array.isArray(e)?e[0]:e;s=t.inlineSize,i=t.blockSize}else s=e.offsetWidth,i=e.offsetHeight;r({width:s,height:i})}));return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)}),[e]),t}},62133:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(51609),s=r(10790);function i(e,t=[]){let r=[];const i=()=>{const t=r.map((e=>n.createContext(e)));return function(r){const s=r?.[e]||t;return n.useMemo((()=>({[`__scope${e}`]:{...r,[e]:s}})),[r,s])}};return i.scopeName=e,[function(t,i){const a=n.createContext(i),c=r.length;r=[...r,i];const o=t=>{const{scope:r,children:i,...o}=t,l=r?.[e]?.[c]||a,d=n.useMemo((()=>o),Object.values(o));return(0,s.jsx)(l.Provider,{value:d,children:i})};return o.displayName=t+"Provider",[o,function(r,s){const o=s?.[e]?.[c]||a,l=n.useContext(o);if(l)return l;if(void 0!==i)return i;throw new Error(`\`${r}\` must be used within \`${t}\``)}]},a(i,...t)]}function a(...e){const t=e[0];if(1===e.length)return t;const r=()=>{const r=e.map((e=>({useScope:e(),scopeName:e.scopeName})));return function(e){const s=r.reduce(((t,{useScope:r,scopeName:n})=>({...t,...r(e)[`__scope${n}`]})),{});return n.useMemo((()=>({[`__scope${t.scopeName}`]:s})),[s])}};return r.scopeName=t.scopeName,r}},81351:(e,t,r)=>{r.d(t,{i:()=>i});var n=r(51609),s=r(10263);function i({prop:e,defaultProp:t,onChange:r=()=>{}}){const[i,a]=function({defaultProp:e,onChange:t}){const r=n.useState(e),[i]=r,a=n.useRef(i),c=(0,s.c)(t);return n.useEffect((()=>{a.current!==i&&(c(i),a.current=i)}),[i,a,c]),r}({defaultProp:t,onChange:r}),c=void 0!==e,o=c?e:i,l=(0,s.c)(r);return[o,n.useCallback((t=>{if(c){const r="function"==typeof t?t(e):t;r!==e&&l(r)}else a(t)}),[c,e,a,l])]}},85023:(e,t,r)=>{r.r(t),r.d(t,{default:()=>u});var n=r(34759),s=r(86087),i=r(27723),a=r(4219),c=r(32921),o=r(52043),l=r(10800),d=r(10790);const u=(0,s.memo)((()=>{const{updatePlaceholderStatus:e,integrationsLoaded:t,services:u,fetchIntegrationsData:p}=(0,n.default)(),[h,f]=(0,s.useState)([]),[g,m]=(0,s.useState)(""),[b,v]=(0,s.useState)(!1),[y,_]=(0,s.useState)(!1),[x,w]=(0,s.useState)(""),[k,j]=(0,s.useState)(""),{updateField:S,getField:C,getFieldValue:A,saveFields:z,setChangedField:N,addHelpNotice:E}=(0,a.default)(),{selectedSubMenuItem:P}=(0,o.default)(),[F,R]=(0,s.useState)(null);(0,s.useEffect)((()=>{r.e(3757).then(r.bind(r,83757)).then((({default:e})=>{R((()=>e))}))}),[]),(0,s.useEffect)((()=>{t||p(),t&&(1==A("safe_mode")?(w((0,i.__)("Safe Mode enabled. To manage integrations, disable Safe Mode under Tools - Support.","complianz-gdpr")),v(!0)):"yes"!==A("uses_thirdparty_services")&&"yes"!==A("uses_social_media")&&"yes"!==A("uses_ad_cookies")&&(w((0,i.__)("Third-party services and social media are marked as not being used on your website in the wizard.","complianz-gdpr")),j("#wizard/services"),v(!0)))}),[t]),(0,s.useEffect)((()=>{I()}),[u]);const I=()=>{let e=[...u];e.forEach((function(t,r){let n={...t},s=C(t.source);if("multicheckbox"===s.type){let e=s.value;Array.isArray(e)||(e=[]),n.enabled=e.includes(t.id)}else n.enabled="yes"===s.value;e[r]=n})),f(e);let t="yes"===A("block_recaptcha_service"),r=u.filter((e=>"google-recaptcha"===e.id))[0];t&&r&&r.enabled&&E("integrations-services","warning",(0,i.__)("reCaptcha is connected and will be blocked before consent. To change your settings, disable reCaptcha in the list.","complianz-gdpr"),(0,i.__)("reCaptcha blocking enabled","complianz-gdpr"),"#wizard/services")};(0,s.useEffect)((()=>{if(0===h.length)return;let e="yes";0===h.filter((e=>!0===e.enabled&&"thirdparty_services_on_site"===e.source)).length&&(e="no"),A("uses_thirdparty_services")!==e&&(S("uses_thirdparty_services",e),N("uses_thirdparty_services",e));let t="yes";0===h.filter((e=>!0===e.enabled&&"socialmedia_on_site"===e.source)).length&&(t="no"),A("uses_social_media")!==t&&(S("uses_social_media",t),N("uses_social_media",t))}),[h]);const T=[{name:(0,i.__)("Service","complianz-gdpr"),selector:e=>e.label,sortable:!0,grow:5},{name:(0,i.__)("Placeholder","complianz-gdpr"),selector:e=>e.placeholderControl,sortable:!0,sortFunction:(e,t)=>{const r=e.placeholder,n=t.placeholder;return r>n?1:n>r?-1:0},grow:2},{name:(0,i.__)("Status","complianz-gdpr"),selector:e=>e.enabledControl,sortable:!0,sortFunction:(e,t)=>{const r=e.enabled,n=t.enabled;return r>n?1:n>r?-1:0},grow:1,right:!0}];let L=h.filter((e=>e.label.toLowerCase().includes(g.toLowerCase())));return L.sort(((e,t)=>e.label<t.label?-1:e.label>t.label?1:0)),L.forEach((t=>{let r=A(t.source);Array.isArray(r)?t.enabled=r.includes(t.id):t.enabled="yes"===r,t.enabledControl=(0,d.jsx)(l.default,{disabled:y,value:t.enabled,onChange:e=>(async(e,t)=>{_(!0);let r,n=C(e.source);if("multicheckbox"===n.type){let s=n.value;Array.isArray(s)||(s=[]),r=[...s],Array.isArray(r)||(r=[]),t?r.push(e.id):r=r.filter((t=>t!==e.id))}else r=t?"yes":"no";S(e.source,r),N(e.source,r),await z(P,!1),await p(),_(!1)})(t,e),className:"cmplz-switch-input-tiny"}),t.placeholderControl=(0,d.jsxs)(d.Fragment,{children:[" ","none"!==t.placeholder&&t.enabled&&(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(l.default,{disabled:y,value:"enabled"===t.placeholder,onChange:r=>(async(t,r)=>{_(!0);let n=[...h],s=n.findIndex((e=>e.id===t.id));n[s].placeholder=r?"enabled":"disabled",f(n),await e(t.id,r),_(!1)})(t,r),className:"cmplz-switch-input-tiny"})})]})})),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("p",{children:[(0,i.__)("Enabled services will be blocked on the front-end of your website until the user has given consent (opt-in), or after the user has revoked consent (opt-out). When possible a placeholder is activated. You can also disable or configure the placeholder to your liking.","complianz-gdpr"),(0,c.default)("https://complianz.io/blocking-recaptcha-manually/")]}),(0,d.jsx)("div",{className:"cmplz-table-header",children:(0,d.jsx)("div",{className:"cmplz-table-header-controls",children:(0,d.jsx)("input",{type:"text",placeholder:(0,i.__)("Search","complianz-gdpr"),value:g,onChange:e=>m(e.target.value)})})}),(b||0===L.length)&&(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("div",{className:"cmplz-settings-overlay",children:(0,d.jsxs)("div",{className:"cmplz-settings-overlay-message",children:[x,k&&(0,d.jsxs)(d.Fragment,{children:[" ",(0,d.jsx)("a",{href:k,children:(0,i.__)("View services","complianz-gdpr")})]})]})})}),0===L.length&&(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:"cmplz-integrations-placeholder",children:[(0,d.jsx)("div",{}),(0,d.jsx)("div",{}),(0,d.jsx)("div",{}),(0,d.jsx)("div",{}),(0,d.jsx)("div",{}),(0,d.jsx)("div",{})]})}),!b&&L.length>0&&F&&(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(F,{columns:T,data:L,dense:!0,pagination:!0,paginationPerPage:5,noDataComponent:(0,d.jsx)("div",{className:"cmplz-no-documents",children:(0,i.__)("No services","complianz-gdpr")}),persistTableHead:!0,theme:"really-simple-plugins",customStyles:{headCells:{style:{paddingLeft:"0",paddingRight:"0"}},cells:{style:{paddingLeft:"0",paddingRight:"0"}}}})})]})}))},85357:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(51609);function s(e){const t=n.useRef({value:e,previous:e});return n.useMemo((()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous)),[e])}},88200:(e,t,r)=>{r.d(t,{N:()=>s});var n=r(51609),s=globalThis?.document?n.useLayoutEffect:()=>{}},91071:(e,t,r)=>{r.d(t,{s:()=>a,t:()=>i});var n=r(51609);function s(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function i(...e){return t=>{let r=!1;const n=e.map((e=>{const n=s(e,t);return r||"function"!=typeof n||(r=!0),n}));if(r)return()=>{for(let t=0;t<n.length;t++){const r=n[t];"function"==typeof r?r():s(e[t],null)}}}}function a(...e){return n.useCallback(i(...e),e)}}}]);