"use strict";(globalThis.webpackChunkcomplianz_gdpr=globalThis.webpackChunkcomplianz_gdpr||[]).push([[2010,2868,5228,7102,9091,9758],{7102:(e,l,a)=>{a.r(l),a.d(l,{default:()=>m});var t=a(45111),o=a(27723),s=a(52010),i=a(15139),n=a(4219),r=a(86087),c=a(82868),d=a(25228),p=a(10790);const u=e=>{const{getFieldValue:l,showSavedSettingsNotice:a}=(0,n.default)(),{language:t,saving:s,purposesOptions:u,services:m,updateCookie:_,toggleDeleteCookie:h,saveCookie:g}=(0,i.default)(),[f,x]=(0,r.useState)(""),[b,j]=(0,r.useState)(""),[v,z]=(0,r.useState)(""),[k,y]=(0,r.useState)([]);let w="no"!==l("use_cdb_api"),C=!!w&&1==e.sync,N=C;s&&(N=!0);let D=!1;e.slug.length>0&&(D="https://cookiedatabase.org/cookie/"+(e.service?e.service:"unknown-service")+"/"+e.slug),(0,r.useEffect)((()=>{e&&e.cookieFunction&&z(e.cookieFunction)}),[e]);const I=(e,l,a)=>{_(l,a,e)};(0,r.useEffect)((()=>{e&&e.name&&x(e.name)}),[e.name]),(0,r.useEffect)((()=>{if(!e)return;if(e.name===f)return;const l=setTimeout((()=>{_(e.ID,"name",f)}),500);return()=>{clearTimeout(l)}}),[f]),(0,r.useEffect)((()=>{if(!e)return;if(e.cookieFunction===v)return;const l=setTimeout((()=>{_(e.ID,"cookieFunction",v)}),500);return()=>{clearTimeout(l)}}),[v]),(0,r.useEffect)((()=>{e&&e.retention&&j(e.retention)}),[e.retention]),(0,r.useEffect)((()=>{if(!e)return;if(e.retention===b)return;const l=setTimeout((()=>{_(e.ID,"retention",b)}),500);return()=>{clearTimeout(l)}}),[b]),(0,r.useEffect)((()=>{let e=u&&u.hasOwnProperty(t)?u[t]:[];e=e.map((e=>({label:e.label,value:e.label}))),y(e)}),[t,u]);const O=(e,l,a)=>{_(l,a,e)};if(!e)return null;let S=-1!==e.name.indexOf("cmplz_")||C,P=1!=e.deleted?"cmplz-reset-button":"",L=m.map(((e,l)=>({value:e.ID,label:e.name}))),T=!1,A="Marketing";k.forEach((function(e,l){e.value&&-1!==e.value.indexOf("/")&&(T=!0,A=e.value,A=A.substring(0,A.indexOf("/")))}));let E=e.purpose&&-1!==e.purpose.indexOf("/");E&&(A=e.purpose.substring(0,e.purpose.indexOf("/"))),T&&!E&&k.forEach((function(e,l){e.value&&-1!==e.value.indexOf("/")&&(e.value=A,e.label=A,k[l]=e)}));let F=e.purpose;return!T&&E&&(F=A),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"cmplz-details-row cmplz-details-row__checkbox",children:(0,p.jsx)(c.default,{id:e.ID+"_cdb_api",disabled:!w,value:C,onChange:l=>O(l,e.ID,"sync"),options:{true:(0,o.__)("Sync cookie with cookiedatabase.org","complianz-gdpr")}})}),(0,p.jsx)("div",{className:"cmplz-details-row cmplz-details-row__checkbox",children:(0,p.jsx)(c.default,{id:e.ID+"showOnPolicy",disabled:N,value:e.showOnPolicy,onChange:l=>O(l,e.ID,"showOnPolicy"),options:{true:(0,o.__)("Show cookie on Cookie Policy","complianz-gdpr")}})}),(0,p.jsxs)("div",{className:"cmplz-details-row",children:[(0,p.jsx)("label",{children:(0,o.__)("Name","complianz-gdpr")}),(0,p.jsx)("input",{disabled:N,onChange:e=>x(e.target.value),type:"text",placeholder:(0,o.__)("Name","complianz-gdpr"),value:f})]}),(0,p.jsxs)("div",{className:"cmplz-details-row",children:[(0,p.jsx)("label",{children:(0,o.__)("Service","complianz-gdpr")}),(0,p.jsx)(d.default,{disabled:N,value:e.serviceID,options:L,onChange:l=>I(l,e.ID,"serviceID")})]}),(0,p.jsxs)("div",{className:"cmplz-details-row",children:[(0,p.jsx)("label",{children:(0,o.__)("Expiration","complianz-gdpr")}),(0,p.jsx)("input",{disabled:S,onChange:e=>j(e.target.value),type:"text",placeholder:(0,o.__)("1 year","complianz-gdpr"),value:b})]}),(0,p.jsxs)("div",{className:"cmplz-details-row",children:[(0,p.jsx)("label",{children:(0,o.__)("Cookie function","complianz-gdpr")}),(0,p.jsx)("input",{disabled:N,onChange:e=>z(e.target.value),type:"text",placeholder:(0,o.__)("e.g. store user ID","complianz-gdpr"),value:v})]}),(0,p.jsxs)("div",{className:"cmplz-details-row",children:[(0,p.jsx)("label",{children:(0,o.__)("Purpose","complianz-gdpr")}),(0,p.jsx)(d.default,{disabled:N,value:F,options:k,onChange:l=>I(l,e.ID,"purpose")})]}),D&&(0,p.jsx)("div",{className:"cmplz-details-row",children:(0,p.jsx)("a",{href:D,target:"_blank",rel:"noopener noreferrer",children:(0,o.__)("View cookie on cookiedatabase.org","complianz-gdpr")})}),(0,p.jsxs)("div",{className:"cmplz-details-row cmplz-details-row__buttons",children:[(0,p.jsx)("button",{disabled:s,onClick:l=>(async e=>{await g(e),a((0,o.__)("Saved cookie","complianz-gdpr"))})(e.ID),className:"button button-default",children:(0,o.__)("Save","complianz-gdpr")}),(0,p.jsxs)("button",{className:"button button-default "+P,onClick:l=>(async e=>{await h(e)})(e.ID),children:[1==e.deleted&&(0,o.__)("Restore","complianz-gdpr"),1!=e.deleted&&(0,o.__)("Delete","complianz-gdpr")]})]})]})},m=(0,r.memo)((({cookie:e,id:l})=>{let a="";e.deleted?a=" | "+(0,o.__)("Deleted","complianz-gdpr"):e.showOnPolicy?e.isMembersOnly&&(a=" | "+(0,o.__)("Logged in users only, ignored","complianz-gdpr")):a=" | "+(0,o.__)("Admin, ignored","complianz-gdpr");let i=e.name;return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(s.default,{id:l,summary:i,comment:a,icons:(0,p.jsxs)(p.Fragment,{children:[e.complete&&(0,p.jsx)(t.default,{tooltip:(0,o.__)("The data for this cookie is complete","complianz-gdpr"),name:"success",color:"green"}),!e.complete&&(0,p.jsx)(t.default,{tooltip:(0,o.__)("This cookie has missing fields","complianz-gdpr"),name:"times",color:"red"}),e.sync&&e.synced&&(0,p.jsx)(t.default,{name:"rotate",color:"green"}),!e.synced||!e.sync&&(0,p.jsx)(t.default,{tooltip:(0,o.__)("This cookie is not synchronized with cookiedatabase.org.","complianz-gdpr"),name:"rotate-error",color:"red"}),e.showOnPolicy&&(0,p.jsx)(t.default,{tooltip:(0,o.__)("This cookie will be on your Cookie Policy","complianz-gdpr"),name:"file",color:"green"}),!e.showOnPolicy&&(0,p.jsx)(t.default,{tooltip:(0,o.__)("This cookie is not shown on the Cookie Policy","complianz-gdpr"),name:"file-disabled",color:"grey"}),e.old&&(0,p.jsx)(t.default,{tooltip:(0,o.__)("This cookie has not been detected on your site in the last three months","complianz-gdpr"),name:"calendar-error",color:"red"}),!e.old&&(0,p.jsx)(t.default,{tooltip:(0,o.__)("This cookie has recently been detected","complianz-gdpr"),name:"calendar",color:"green"})]}),details:u(e),style:(()=>{if(e.deleted)return Object.assign({},{backgroundColor:"var(--rsp-red-faded)"})})()})})}))},25228:(e,l,a)=>{a.r(l),a.d(l,{default:()=>r});var t=a(86087),o=a(21366),s=a(45111),i=a(27723),n=a(10790);const r=(0,t.memo)((({value:e=!1,onChange:l,required:a,defaultValue:t,disabled:r,options:c={},canBeEmpty:d=!0,label:p})=>{if(Array.isArray(c)){let e={};c.map((l=>{e[l.value]=l.label})),c=e}return d?(""===e||!1===e||0===e)&&(e="0",c={0:(0,i.__)("Select an option","complianz-gdpr"),...c}):e||(e=Object.keys(c)[0]),(0,n.jsx)("div",{className:"cmplz-input-group cmplz-select-group",children:(0,n.jsxs)(o.bL,{value:e,defaultValue:t,onValueChange:l,required:a,disabled:r&&!Array.isArray(r),children:[(0,n.jsxs)(o.l9,{className:"cmplz-select-group__trigger",children:[(0,n.jsx)(o.WT,{}),(0,n.jsx)(s.default,{name:"chevron-down"})]}),(0,n.jsxs)(o.UC,{className:"cmplz-select-group__content",position:"popper",children:[(0,n.jsx)(o.PP,{className:"cmplz-select-group__scroll-button",children:(0,n.jsx)(s.default,{name:"chevron-up"})}),(0,n.jsx)(o.LM,{className:"cmplz-select-group__viewport",children:(0,n.jsx)(o.YJ,{children:Object.entries(c).map((([e,l])=>(0,n.jsx)(o.q7,{disabled:Array.isArray(r)&&r.includes(e),className:"cmplz-select-group__item",value:e,children:(0,n.jsx)(o.p4,{children:l})},e)))})}),(0,n.jsx)(o.wn,{className:"cmplz-select-group__scroll-button",children:(0,n.jsx)(s.default,{name:"chevron-down"})})]})]})},p)}))},52010:(e,l,a)=>{a.r(l),a.d(l,{default:()=>i});var t=a(45111),o=a(86087),s=a(10790);const i=e=>{const[l,a]=(0,o.useState)(!1);return(0,s.jsx)("div",{className:"cmplz-panel__list__item",style:e.style?e.style:{},children:(0,s.jsxs)("details",{open:l,children:[(0,s.jsxs)("summary",{onClick:e=>(e=>{e.preventDefault(),a(!l)})(e),children:[e.icon&&(0,s.jsx)(t.default,{name:e.icon}),(0,s.jsx)("h5",{className:"cmplz-panel__list__item__title",children:e.summary}),(0,s.jsx)("div",{className:"cmplz-panel__list__item__comment",children:e.comment}),(0,s.jsx)("div",{className:"cmplz-panel__list__item__icons",children:e.icons}),(0,s.jsx)(t.default,{name:"chevron-down",size:18})]}),(0,s.jsx)("div",{className:"cmplz-panel__list__item__details",children:l&&e.details})]})})}},79758:(e,l,a)=>{a.r(l),a.d(l,{default:()=>p});var t=a(86087),o=a(9588),s=a(4219),i=a(52043),n=a(56427),r=a(99091),c=a(32828),d=a(10790);const p=(0,t.memo)((({type:e="action",style:l="tertiary",label:a,onClick:p,href:u="",target:m="",disabled:_,action:h,field:g,children:f})=>{if(!a&&!f)return null;const x=(g&&g.button_text?g.button_text:a)||f,{fetchFieldsData:b,showSavedSettingsNotice:j}=(0,s.default)(),{setInitialLoadCompleted:v,setProgress:z}=(0,r.UseCookieScanData)(),{setProgressLoaded:k}=(0,c.default)(),{selectedSubMenuItem:y}=(0,i.default)(),[w,C]=(0,t.useState)(!1),N=`button cmplz-button button--${l} button-${e}`,D=async e=>{await o.doAction(g.action,{}).then((e=>{e.success&&(b(y),"reset_settings"===e.id&&(v(!1),z(0),k(!1)),j(e.message))}))},I=g&&g.warn?g.warn:"";return"action"===e?(0,d.jsxs)(d.Fragment,{children:[n.__experimentalConfirmDialog&&(0,d.jsx)(n.__experimentalConfirmDialog,{isOpen:w,onConfirm:async()=>{C(!1),await D()},onCancel:()=>{C(!1)},children:I}),(0,d.jsx)("button",{className:N,onClick:async l=>{if("action"!==e||!p)return"action"===e&&h?n.__experimentalConfirmDialog?void(g&&g.warn?C(!0):await D()):void await D():void(window.location.href=g.url);p(l)},disabled:_,children:x})]}):"link"===e?(0,d.jsx)("a",{className:N,href:u,target:m,children:x}):void 0}))},82868:(e,l,a)=>{a.r(l),a.d(l,{default:()=>c});var t=a(92731),o=a(27723),s=a(45111),i=a(86087),n=a(79758),r=a(10790);const c=(0,i.memo)((({indeterminate:e,label:l,value:a,id:c,onChange:d,required:p,disabled:u,options:m={}})=>{const[_,h]=(0,i.useState)(!1),[g,f]=(0,i.useState)(!1);let x=a;Array.isArray(x)||(x=""===x?[]:[x]),(0,i.useEffect)((()=>{let e=1===Object.keys(m).length&&"true"===Object.keys(m)[0];h(e)}),[]),e&&(a=!0);const b=x;let j=!1;Object.keys(m).length>10&&(j=!0);const v=e=>_?a:b.includes(""+e)||b.includes(parseInt(e)),z=()=>{f(!g)};let k=u&&!Array.isArray(u);return 0===Object.keys(m).length?(0,r.jsx)(r.Fragment,{children:(0,o.__)("No options found","complianz-gdpr")}):(0,r.jsxs)("div",{className:"cmplz-checkbox-group",children:[Object.entries(m).map((([o,i],n)=>(0,r.jsxs)("div",{className:"cmplz-checkbox-group__item"+(!g&&n>9?" cmplz-hidden":""),children:[(0,r.jsx)(t.bL,{className:"cmplz-checkbox-group__checkbox",id:c+"_"+o,checked:v(o),"aria-label":l,disabled:k||Array.isArray(u)&&u.includes(o),required:p,onCheckedChange:e=>((e,l)=>{if(_)d(!a);else{const e=b.includes(""+l)||b.includes(parseInt(l))?b.filter((e=>e!==""+l&&e!==parseInt(l))):[...b,l];d(e)}})(0,o),children:(0,r.jsx)(t.C1,{className:"cmplz-checkbox-group__indicator",children:(0,r.jsx)(s.default,{name:e?"indeterminate":"check",size:14,color:"dark-blue"})})}),(0,r.jsx)("label",{className:"cmplz-checkbox-group__label",htmlFor:c+"_"+o,children:i})]},o))),!g&&j&&(0,r.jsx)(n.default,{onClick:()=>z(),children:(0,o.__)("Show more","complianz-gdpr")}),g&&j&&(0,r.jsx)(n.default,{onClick:()=>z(),children:(0,o.__)("Show less","complianz-gdpr")})]})}))},99091:(e,l,a)=>{a.r(l),a.d(l,{UseCookieScanData:()=>s});var t=a(81621),o=a(9588);const s=(0,t.vt)(((e,l)=>({initialLoadCompleted:!1,setInitialLoadCompleted:l=>e({initialLoadCompleted:l}),iframeLoaded:!1,loading:!1,nextPage:!1,progress:0,cookies:[],lastLoadedIframe:"",setIframeLoaded:l=>e({iframeLoaded:l}),setLastLoadedIframe:l=>e((e=>({lastLoadedIframe:l}))),setProgress:l=>e({progress:l}),fetchProgress:()=>(e({loading:!0}),o.doAction("get_scan_progress",{}).then((l=>(e({initialLoadCompleted:!0,loading:!1,nextPage:l.next_page,progress:l.progress,cookies:l.cookies}),l))))})))}}]);