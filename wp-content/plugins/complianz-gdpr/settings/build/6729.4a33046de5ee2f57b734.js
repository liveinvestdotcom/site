"use strict";(globalThis.webpackChunkcomplianz_gdpr=globalThis.webpackChunkcomplianz_gdpr||[]).push([[2010,2868,5228,6729,7102,9091,9758],{7102:(e,a,s)=>{s.r(a),s.d(a,{default:()=>u});var t=s(45111),l=s(27723),i=s(52010),o=s(15139),n=s(4219),r=s(86087),c=s(82868),d=s(25228),p=s(10790);const m=e=>{const{getFieldValue:a,showSavedSettingsNotice:s}=(0,n.default)(),{language:t,saving:i,purposesOptions:m,services:u,updateCookie:h,toggleDeleteCookie:_,saveCookie:g}=(0,o.default)(),[f,x]=(0,r.useState)(""),[v,b]=(0,r.useState)(""),[j,z]=(0,r.useState)(""),[y,k]=(0,r.useState)([]);let w="no"!==a("use_cdb_api"),C=!!w&&1==e.sync,N=C;i&&(N=!0);let S=!1;e.slug.length>0&&(S="https://cookiedatabase.org/cookie/"+(e.service?e.service:"unknown-service")+"/"+e.slug),(0,r.useEffect)((()=>{e&&e.cookieFunction&&z(e.cookieFunction)}),[e]);const D=(e,a,s)=>{h(a,s,e)};(0,r.useEffect)((()=>{e&&e.name&&x(e.name)}),[e.name]),(0,r.useEffect)((()=>{if(!e)return;if(e.name===f)return;const a=setTimeout((()=>{h(e.ID,"name",f)}),500);return()=>{clearTimeout(a)}}),[f]),(0,r.useEffect)((()=>{if(!e)return;if(e.cookieFunction===j)return;const a=setTimeout((()=>{h(e.ID,"cookieFunction",j)}),500);return()=>{clearTimeout(a)}}),[j]),(0,r.useEffect)((()=>{e&&e.retention&&b(e.retention)}),[e.retention]),(0,r.useEffect)((()=>{if(!e)return;if(e.retention===v)return;const a=setTimeout((()=>{h(e.ID,"retention",v)}),500);return()=>{clearTimeout(a)}}),[v]),(0,r.useEffect)((()=>{let e=m&&m.hasOwnProperty(t)?m[t]:[];e=e.map((e=>({label:e.label,value:e.label}))),k(e)}),[t,m]);const I=(e,a,s)=>{h(a,s,e)};if(!e)return null;let T=-1!==e.name.indexOf("cmplz_")||C,O=1!=e.deleted?"cmplz-reset-button":"",L=u.map(((e,a)=>({value:e.ID,label:e.name}))),P=!1,F="Marketing";y.forEach((function(e,a){e.value&&-1!==e.value.indexOf("/")&&(P=!0,F=e.value,F=F.substring(0,F.indexOf("/")))}));let E=e.purpose&&-1!==e.purpose.indexOf("/");E&&(F=e.purpose.substring(0,e.purpose.indexOf("/"))),P&&!E&&y.forEach((function(e,a){e.value&&-1!==e.value.indexOf("/")&&(e.value=F,e.label=F,y[a]=e)}));let A=e.purpose;return!P&&E&&(A=F),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"cmplz-details-row cmplz-details-row__checkbox",children:(0,p.jsx)(c.default,{id:e.ID+"_cdb_api",disabled:!w,value:C,onChange:a=>I(a,e.ID,"sync"),options:{true:(0,l.__)("Sync cookie with cookiedatabase.org","complianz-gdpr")}})}),(0,p.jsx)("div",{className:"cmplz-details-row cmplz-details-row__checkbox",children:(0,p.jsx)(c.default,{id:e.ID+"showOnPolicy",disabled:N,value:e.showOnPolicy,onChange:a=>I(a,e.ID,"showOnPolicy"),options:{true:(0,l.__)("Show cookie on Cookie Policy","complianz-gdpr")}})}),(0,p.jsxs)("div",{className:"cmplz-details-row",children:[(0,p.jsx)("label",{children:(0,l.__)("Name","complianz-gdpr")}),(0,p.jsx)("input",{disabled:N,onChange:e=>x(e.target.value),type:"text",placeholder:(0,l.__)("Name","complianz-gdpr"),value:f})]}),(0,p.jsxs)("div",{className:"cmplz-details-row",children:[(0,p.jsx)("label",{children:(0,l.__)("Service","complianz-gdpr")}),(0,p.jsx)(d.default,{disabled:N,value:e.serviceID,options:L,onChange:a=>D(a,e.ID,"serviceID")})]}),(0,p.jsxs)("div",{className:"cmplz-details-row",children:[(0,p.jsx)("label",{children:(0,l.__)("Expiration","complianz-gdpr")}),(0,p.jsx)("input",{disabled:T,onChange:e=>b(e.target.value),type:"text",placeholder:(0,l.__)("1 year","complianz-gdpr"),value:v})]}),(0,p.jsxs)("div",{className:"cmplz-details-row",children:[(0,p.jsx)("label",{children:(0,l.__)("Cookie function","complianz-gdpr")}),(0,p.jsx)("input",{disabled:N,onChange:e=>z(e.target.value),type:"text",placeholder:(0,l.__)("e.g. store user ID","complianz-gdpr"),value:j})]}),(0,p.jsxs)("div",{className:"cmplz-details-row",children:[(0,p.jsx)("label",{children:(0,l.__)("Purpose","complianz-gdpr")}),(0,p.jsx)(d.default,{disabled:N,value:A,options:y,onChange:a=>D(a,e.ID,"purpose")})]}),S&&(0,p.jsx)("div",{className:"cmplz-details-row",children:(0,p.jsx)("a",{href:S,target:"_blank",rel:"noopener noreferrer",children:(0,l.__)("View cookie on cookiedatabase.org","complianz-gdpr")})}),(0,p.jsxs)("div",{className:"cmplz-details-row cmplz-details-row__buttons",children:[(0,p.jsx)("button",{disabled:i,onClick:a=>(async e=>{await g(e),s((0,l.__)("Saved cookie","complianz-gdpr"))})(e.ID),className:"button button-default",children:(0,l.__)("Save","complianz-gdpr")}),(0,p.jsxs)("button",{className:"button button-default "+O,onClick:a=>(async e=>{await _(e)})(e.ID),children:[1==e.deleted&&(0,l.__)("Restore","complianz-gdpr"),1!=e.deleted&&(0,l.__)("Delete","complianz-gdpr")]})]})]})},u=(0,r.memo)((({cookie:e,id:a})=>{let s="";e.deleted?s=" | "+(0,l.__)("Deleted","complianz-gdpr"):e.showOnPolicy?e.isMembersOnly&&(s=" | "+(0,l.__)("Logged in users only, ignored","complianz-gdpr")):s=" | "+(0,l.__)("Admin, ignored","complianz-gdpr");let o=e.name;return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(i.default,{id:a,summary:o,comment:s,icons:(0,p.jsxs)(p.Fragment,{children:[e.complete&&(0,p.jsx)(t.default,{tooltip:(0,l.__)("The data for this cookie is complete","complianz-gdpr"),name:"success",color:"green"}),!e.complete&&(0,p.jsx)(t.default,{tooltip:(0,l.__)("This cookie has missing fields","complianz-gdpr"),name:"times",color:"red"}),e.sync&&e.synced&&(0,p.jsx)(t.default,{name:"rotate",color:"green"}),!e.synced||!e.sync&&(0,p.jsx)(t.default,{tooltip:(0,l.__)("This cookie is not synchronized with cookiedatabase.org.","complianz-gdpr"),name:"rotate-error",color:"red"}),e.showOnPolicy&&(0,p.jsx)(t.default,{tooltip:(0,l.__)("This cookie will be on your Cookie Policy","complianz-gdpr"),name:"file",color:"green"}),!e.showOnPolicy&&(0,p.jsx)(t.default,{tooltip:(0,l.__)("This cookie is not shown on the Cookie Policy","complianz-gdpr"),name:"file-disabled",color:"grey"}),e.old&&(0,p.jsx)(t.default,{tooltip:(0,l.__)("This cookie has not been detected on your site in the last three months","complianz-gdpr"),name:"calendar-error",color:"red"}),!e.old&&(0,p.jsx)(t.default,{tooltip:(0,l.__)("This cookie has recently been detected","complianz-gdpr"),name:"calendar",color:"green"})]}),details:m(e),style:(()=>{if(e.deleted)return Object.assign({},{backgroundColor:"var(--rsp-red-faded)"})})()})})}))},25228:(e,a,s)=>{s.r(a),s.d(a,{default:()=>r});var t=s(86087),l=s(21366),i=s(45111),o=s(27723),n=s(10790);const r=(0,t.memo)((({value:e=!1,onChange:a,required:s,defaultValue:t,disabled:r,options:c={},canBeEmpty:d=!0,label:p})=>{if(Array.isArray(c)){let e={};c.map((a=>{e[a.value]=a.label})),c=e}return d?(""===e||!1===e||0===e)&&(e="0",c={0:(0,o.__)("Select an option","complianz-gdpr"),...c}):e||(e=Object.keys(c)[0]),(0,n.jsx)("div",{className:"cmplz-input-group cmplz-select-group",children:(0,n.jsxs)(l.bL,{value:e,defaultValue:t,onValueChange:a,required:s,disabled:r&&!Array.isArray(r),children:[(0,n.jsxs)(l.l9,{className:"cmplz-select-group__trigger",children:[(0,n.jsx)(l.WT,{}),(0,n.jsx)(i.default,{name:"chevron-down"})]}),(0,n.jsxs)(l.UC,{className:"cmplz-select-group__content",position:"popper",children:[(0,n.jsx)(l.PP,{className:"cmplz-select-group__scroll-button",children:(0,n.jsx)(i.default,{name:"chevron-up"})}),(0,n.jsx)(l.LM,{className:"cmplz-select-group__viewport",children:(0,n.jsx)(l.YJ,{children:Object.entries(c).map((([e,a])=>(0,n.jsx)(l.q7,{disabled:Array.isArray(r)&&r.includes(e),className:"cmplz-select-group__item",value:e,children:(0,n.jsx)(l.p4,{children:a})},e)))})}),(0,n.jsx)(l.wn,{className:"cmplz-select-group__scroll-button",children:(0,n.jsx)(i.default,{name:"chevron-down"})})]})]})},p)}))},36729:(e,a,s)=>{s.r(a),s.d(a,{default:()=>h});var t=s(7102),l=s(52010),i=s(15139),o=s(27723),n=s(45111),r=s(4219),c=s(82868),d=s(25228),p=s(86087),m=s(10790);const u=e=>{const{getFieldValue:a,showSavedSettingsNotice:s}=(0,r.default)(),[t,l]=(0,p.useState)(""),[n,u]=(0,p.useState)(""),{language:h,saving:_,deleteService:g,serviceTypeOptions:f,updateService:x,saveService:v}=(0,i.default)();let b="yes"===a("use_cdb_api");const[j,z]=(0,p.useState)([]);(0,p.useEffect)((()=>{let e=f&&f.hasOwnProperty(h)?f[h]:[];e=e.map((e=>({label:e.label,value:e.label}))),z(e)}),[h,f]);const y=(e,a,s)=>{x(a,s,e)},k=(e,a,s)=>{x(a,s,e)};if((0,p.useEffect)((()=>{e&&e.name&&l(e.name)}),[e]),(0,p.useEffect)((()=>{if(!e)return;if(e.name===t)return;if(t.length<2)return;const a=setTimeout((()=>{y(t,e.ID,"name")}),500);return()=>{clearTimeout(a)}}),[t]),(0,p.useEffect)((()=>{e&&e.privacyStatementURL&&u(e.privacyStatementURL)}),[e]),(0,p.useEffect)((()=>{if(!e)return;if(e.privacyStatementURL===n)return;if(0===n.length)return;const a=setTimeout((()=>{y(n,e.ID,"privacyStatementURL")}),400);return()=>{clearTimeout(a)}}),[n]),!e)return null;let w=!!b&&1==e.sync,C=w;_&&(C=!0);let N=!1;return e.slug.length>0&&(N="https://cookiedatabase.org/service/"+e.slug),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"cmplz-details-row cmplz-details-row__checkbox",children:(0,m.jsx)(c.default,{id:e.ID+"sharesData",disabled:C,value:1==e.sharesData,onChange:a=>k(a,e.ID,"sharesData"),options:{true:(0,o.__)("Data is shared with this service","complianz-gdpr")}})}),(0,m.jsx)("div",{className:"cmplz-details-row cmplz-details-row__checkbox",children:(0,m.jsx)(c.default,{id:e.ID+"sync",disabled:!b,value:w,onChange:a=>k(a,e.ID,"sync"),options:{true:(0,o.__)("Sync service with cookiedatabase.org","complianz-gdpr")}})}),(0,m.jsxs)("div",{className:"cmplz-details-row",children:[(0,m.jsx)("label",{children:(0,o.__)("Name","complianz-gdpr")}),(0,m.jsx)("input",{disabled:C,onChange:e=>l(e.target.value),type:"text",placeholder:(0,o.__)("Name","complianz-gdpr"),value:t})]}),(0,m.jsxs)("div",{className:"cmplz-details-row",children:[(0,m.jsx)("label",{children:(0,o.__)("Service Types","complianz-gdpr")}),(0,m.jsx)(d.default,{disabled:C,value:e.serviceType,options:j,onChange:a=>y(a,e.ID,"serviceType")})]}),(0,m.jsxs)("div",{className:"cmplz-details-row",children:[(0,m.jsx)("label",{children:(0,o.__)("Privacy Statement URL","complianz-gdpr")}),(0,m.jsx)("input",{disabled:C,onChange:e=>u(e.target.value),type:"text",value:n})]}),N&&(0,m.jsx)("div",{className:"cmplz-details-row",children:(0,m.jsx)("a",{href:N,target:"_blank",rel:"noopener noreferrer",children:(0,o.__)("View service on cookiedatabase.org","complianz-gdpr")})}),(0,m.jsxs)("div",{className:"cmplz-details-row cmplz-details-row__buttons",children:[(0,m.jsx)("button",{disabled:_,onClick:a=>(async e=>{await v(e),s((0,o.__)("Saved service","complianz-gdpr"))})(e.ID),className:"button button-default",children:(0,o.__)("Save","complianz-gdpr")}),(0,m.jsx)("button",{className:"button button-default cmplz-reset-button",onClick:a=>(async e=>{await g(e)})(e.ID),children:(0,o.__)("Delete Service","complianz-gdpr")})]})]})},h=(0,p.memo)((e=>{const{adding:a}=(0,i.default)(),s=e.service&&e.service.ID>0&&e.service.hasOwnProperty("name"),r=!e.service||e.service.ID<=0,c=e.service&&e.service.name?e.service.name:(0,o.__)("New Service","complianz-gdpr");return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(l.default,{id:e.id,summary:e.name,icons:e.service?(0,m.jsxs)(m.Fragment,{children:[e.service.complete&&(0,m.jsx)(n.default,{tooltip:(0,o.__)("The data for this service is complete","complianz-gdpr"),name:"success",color:"green"}),!e.service.complete&&(0,m.jsx)(n.default,{tooltip:(0,o.__)("This service has missing fields","complianz-gdpr"),name:"times",color:"red"}),e.service.synced&&(0,m.jsx)(n.default,{tooltip:(0,o.__)("This service has been synchronized with cookiedatabase.org","complianz-gdpr"),name:"rotate",color:"green"}),!e.service.synced&&(0,m.jsx)(n.default,{tooltip:(0,o.__)("This service is not synchronized with cookiedatabase.org","complianz-gdpr"),name:"rotate-error",color:"red"})]}):(0,m.jsx)(m.Fragment,{}),details:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{children:u(e.service)}),e.cookies&&e.cookies.length>0&&(0,m.jsx)("div",{className:"cmplz-panel__cookie_list",children:e.cookies.map(((e,a)=>(0,m.jsx)(t.default,{cookie:e},a)))}),!r&&(0,m.jsxs)("div",{children:[(0,m.jsxs)("button",{disabled:a||!s,onClick:a=>((a,s)=>{e.addCookie(a,s)})(e.service.ID,c),className:"button button-default",children:[(0,o.__)("Add cookie to %s","complianz-gdpr").replace("%s",c),a&&(0,m.jsx)(n.default,{name:"loading",color:"grey"})]}),!s&&(0,m.jsx)("div",{className:"cmplz-comment",children:(0,o.__)("Save service to be able to add cookies","complianz-gdpr")})]})]})})})}))},52010:(e,a,s)=>{s.r(a),s.d(a,{default:()=>o});var t=s(45111),l=s(86087),i=s(10790);const o=e=>{const[a,s]=(0,l.useState)(!1);return(0,i.jsx)("div",{className:"cmplz-panel__list__item",style:e.style?e.style:{},children:(0,i.jsxs)("details",{open:a,children:[(0,i.jsxs)("summary",{onClick:e=>(e=>{e.preventDefault(),s(!a)})(e),children:[e.icon&&(0,i.jsx)(t.default,{name:e.icon}),(0,i.jsx)("h5",{className:"cmplz-panel__list__item__title",children:e.summary}),(0,i.jsx)("div",{className:"cmplz-panel__list__item__comment",children:e.comment}),(0,i.jsx)("div",{className:"cmplz-panel__list__item__icons",children:e.icons}),(0,i.jsx)(t.default,{name:"chevron-down",size:18})]}),(0,i.jsx)("div",{className:"cmplz-panel__list__item__details",children:a&&e.details})]})})}},79758:(e,a,s)=>{s.r(a),s.d(a,{default:()=>p});var t=s(86087),l=s(9588),i=s(4219),o=s(52043),n=s(56427),r=s(99091),c=s(32828),d=s(10790);const p=(0,t.memo)((({type:e="action",style:a="tertiary",label:s,onClick:p,href:m="",target:u="",disabled:h,action:_,field:g,children:f})=>{if(!s&&!f)return null;const x=(g&&g.button_text?g.button_text:s)||f,{fetchFieldsData:v,showSavedSettingsNotice:b}=(0,i.default)(),{setInitialLoadCompleted:j,setProgress:z}=(0,r.UseCookieScanData)(),{setProgressLoaded:y}=(0,c.default)(),{selectedSubMenuItem:k}=(0,o.default)(),[w,C]=(0,t.useState)(!1),N=`button cmplz-button button--${a} button-${e}`,S=async e=>{await l.doAction(g.action,{}).then((e=>{e.success&&(v(k),"reset_settings"===e.id&&(j(!1),z(0),y(!1)),b(e.message))}))},D=g&&g.warn?g.warn:"";return"action"===e?(0,d.jsxs)(d.Fragment,{children:[n.__experimentalConfirmDialog&&(0,d.jsx)(n.__experimentalConfirmDialog,{isOpen:w,onConfirm:async()=>{C(!1),await S()},onCancel:()=>{C(!1)},children:D}),(0,d.jsx)("button",{className:N,onClick:async a=>{if("action"!==e||!p)return"action"===e&&_?n.__experimentalConfirmDialog?void(g&&g.warn?C(!0):await S()):void await S():void(window.location.href=g.url);p(a)},disabled:h,children:x})]}):"link"===e?(0,d.jsx)("a",{className:N,href:m,target:u,children:x}):void 0}))},82868:(e,a,s)=>{s.r(a),s.d(a,{default:()=>c});var t=s(92731),l=s(27723),i=s(45111),o=s(86087),n=s(79758),r=s(10790);const c=(0,o.memo)((({indeterminate:e,label:a,value:s,id:c,onChange:d,required:p,disabled:m,options:u={}})=>{const[h,_]=(0,o.useState)(!1),[g,f]=(0,o.useState)(!1);let x=s;Array.isArray(x)||(x=""===x?[]:[x]),(0,o.useEffect)((()=>{let e=1===Object.keys(u).length&&"true"===Object.keys(u)[0];_(e)}),[]),e&&(s=!0);const v=x;let b=!1;Object.keys(u).length>10&&(b=!0);const j=e=>h?s:v.includes(""+e)||v.includes(parseInt(e)),z=()=>{f(!g)};let y=m&&!Array.isArray(m);return 0===Object.keys(u).length?(0,r.jsx)(r.Fragment,{children:(0,l.__)("No options found","complianz-gdpr")}):(0,r.jsxs)("div",{className:"cmplz-checkbox-group",children:[Object.entries(u).map((([l,o],n)=>(0,r.jsxs)("div",{className:"cmplz-checkbox-group__item"+(!g&&n>9?" cmplz-hidden":""),children:[(0,r.jsx)(t.bL,{className:"cmplz-checkbox-group__checkbox",id:c+"_"+l,checked:j(l),"aria-label":a,disabled:y||Array.isArray(m)&&m.includes(l),required:p,onCheckedChange:e=>((e,a)=>{if(h)d(!s);else{const e=v.includes(""+a)||v.includes(parseInt(a))?v.filter((e=>e!==""+a&&e!==parseInt(a))):[...v,a];d(e)}})(0,l),children:(0,r.jsx)(t.C1,{className:"cmplz-checkbox-group__indicator",children:(0,r.jsx)(i.default,{name:e?"indeterminate":"check",size:14,color:"dark-blue"})})}),(0,r.jsx)("label",{className:"cmplz-checkbox-group__label",htmlFor:c+"_"+l,children:o})]},l))),!g&&b&&(0,r.jsx)(n.default,{onClick:()=>z(),children:(0,l.__)("Show more","complianz-gdpr")}),g&&b&&(0,r.jsx)(n.default,{onClick:()=>z(),children:(0,l.__)("Show less","complianz-gdpr")})]})}))},99091:(e,a,s)=>{s.r(a),s.d(a,{UseCookieScanData:()=>i});var t=s(81621),l=s(9588);const i=(0,t.vt)(((e,a)=>({initialLoadCompleted:!1,setInitialLoadCompleted:a=>e({initialLoadCompleted:a}),iframeLoaded:!1,loading:!1,nextPage:!1,progress:0,cookies:[],lastLoadedIframe:"",setIframeLoaded:a=>e({iframeLoaded:a}),setLastLoadedIframe:a=>e((e=>({lastLoadedIframe:a}))),setProgress:a=>e({progress:a}),fetchProgress:()=>(e({loading:!0}),l.doAction("get_scan_progress",{}).then((a=>(e({initialLoadCompleted:!0,loading:!1,nextPage:a.next_page,progress:a.progress,cookies:a.cookies}),a))))})))}}]);