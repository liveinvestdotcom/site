"use strict";(globalThis.webpackChunkcomplianz_gdpr=globalThis.webpackChunkcomplianz_gdpr||[]).push([[2868,4759,5228,8033,9091,9758],{10800:(e,t,s)=>{s.r(t),s.d(t,{default:()=>C});var r=s(86087),c=s(51609),n=s(9957),a=s(91071),i=s(62133),l=s(81351),d=s(85357),o=s(54150),p=s(12579),u=s(10790),h="Switch",[m,g]=(0,i.A)(h),[f,b]=m(h),_=c.forwardRef(((e,t)=>{const{__scopeSwitch:s,name:r,checked:i,defaultChecked:d,required:o,disabled:h,value:m="on",onCheckedChange:g,form:b,..._}=e,[y,x]=c.useState(null),v=(0,a.s)(t,(e=>x(e))),w=c.useRef(!1),A=!y||b||!!y.closest("form"),[C=!1,z]=(0,l.i)({prop:i,defaultProp:d,onChange:g});return(0,u.jsxs)(f,{scope:s,checked:C,disabled:h,children:[(0,u.jsx)(p.sG.button,{type:"button",role:"switch","aria-checked":C,"aria-required":o,"data-state":j(C),"data-disabled":h?"":void 0,disabled:h,value:m,..._,ref:v,onClick:(0,n.m)(e.onClick,(e=>{z((e=>!e)),A&&(w.current=e.isPropagationStopped(),w.current||e.stopPropagation())}))}),A&&(0,u.jsx)(k,{control:y,bubbles:!w.current,name:r,value:m,checked:C,required:o,disabled:h,form:b,style:{transform:"translateX(-100%)"}})]})}));_.displayName=h;var y="SwitchThumb",x=c.forwardRef(((e,t)=>{const{__scopeSwitch:s,...r}=e,c=b(y,s);return(0,u.jsx)(p.sG.span,{"data-state":j(c.checked),"data-disabled":c.disabled?"":void 0,...r,ref:t})}));x.displayName=y;var k=e=>{const{control:t,checked:s,bubbles:r=!0,...n}=e,a=c.useRef(null),i=(0,d.Z)(s),l=(0,o.X)(t);return c.useEffect((()=>{const e=a.current,t=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(t,"checked").set;if(i!==s&&c){const t=new Event("click",{bubbles:r});c.call(e,s),e.dispatchEvent(t)}}),[i,s,r]),(0,u.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...n,tabIndex:-1,ref:a,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function j(e){return e?"checked":"unchecked"}var v=_,w=x,A=s(4219);const C=(0,r.memo)((({value:e,onChange:t,required:s,disabled:r,className:c,label:n,id:a})=>{const{getField:i}=(0,A.default)();let l=e;return"0"!==e&&"1"!==e||(l="1"===e),(0,u.jsx)("div",{className:"cmplz-input-group cmplz-switch-group",children:(0,u.jsx)(v,{className:"cmplz-switch-root "+c,checked:l,onCheckedChange:e=>{"banner"===i(a).data_target&&(e=e?"1":"0"),t(e)},disabled:r,required:s,children:(0,u.jsx)(w,{className:"cmplz-switch-thumb"})})})}))},25228:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var r=s(86087),c=s(21366),n=s(45111),a=s(27723),i=s(10790);const l=(0,r.memo)((({value:e=!1,onChange:t,required:s,defaultValue:r,disabled:l,options:d={},canBeEmpty:o=!0,label:p})=>{if(Array.isArray(d)){let e={};d.map((t=>{e[t.value]=t.label})),d=e}return o?(""===e||!1===e||0===e)&&(e="0",d={0:(0,a.__)("Select an option","complianz-gdpr"),...d}):e||(e=Object.keys(d)[0]),(0,i.jsx)("div",{className:"cmplz-input-group cmplz-select-group",children:(0,i.jsxs)(c.bL,{value:e,defaultValue:r,onValueChange:t,required:s,disabled:l&&!Array.isArray(l),children:[(0,i.jsxs)(c.l9,{className:"cmplz-select-group__trigger",children:[(0,i.jsx)(c.WT,{}),(0,i.jsx)(n.default,{name:"chevron-down"})]}),(0,i.jsxs)(c.UC,{className:"cmplz-select-group__content",position:"popper",children:[(0,i.jsx)(c.PP,{className:"cmplz-select-group__scroll-button",children:(0,i.jsx)(n.default,{name:"chevron-up"})}),(0,i.jsx)(c.LM,{className:"cmplz-select-group__viewport",children:(0,i.jsx)(c.YJ,{children:Object.entries(d).map((([e,t])=>(0,i.jsx)(c.q7,{disabled:Array.isArray(l)&&l.includes(e),className:"cmplz-select-group__item",value:e,children:(0,i.jsx)(c.p4,{children:t})},e)))})}),(0,i.jsx)(c.wn,{className:"cmplz-select-group__scroll-button",children:(0,i.jsx)(n.default,{name:"chevron-down"})})]})]})},p)}))},34759:(e,t,s)=>{s.r(t),s.d(t,{default:()=>a});var r=s(81621),c=s(16535),n=s(9588);const a=(0,r.vt)(((e,t)=>({integrationsLoaded:!1,fetching:!1,services:[],plugins:[],scripts:[],placeholders:[],blockedScripts:[],setScript:(t,s)=>{e((0,c.Ay)((e=>{if("block_script"===s){let s=e.blockedScripts;if(t.urls){for(const[e,r]of Object.entries(t.urls)){if(!r||0===r.length)continue;let e=!1;for(const[t,c]of Object.entries(s))r===t&&(e=!0);e||(s[r]=r)}e.blockedScripts=s}}const r=e.scripts[s].findIndex((e=>e.id===t.id));-1!==r&&(e.scripts[s][r]=t)})))},fetchIntegrationsData:async()=>{if(t().fetching)return;e({fetching:!0});const{services:s,plugins:r,scripts:c,placeholders:n,blocked_scripts:a}=await i();let l=c;l.block_script&&l.block_script.length>0&&l.block_script.forEach(((e,t)=>{e.id=t})),l.add_script&&l.add_script.length>0&&l.add_script.forEach(((e,t)=>{e.id=t})),l.whitelist_script&&l.whitelist_script.length>0&&l.whitelist_script.forEach(((e,t)=>{e.id=t})),e((()=>({integrationsLoaded:!0,services:s,plugins:r,scripts:l,fetching:!1,placeholders:n,blockedScripts:a})))},addScript:s=>{e({fetching:!0}),t().scripts[s]&&Array.isArray(t().scripts[s])||e((0,c.Ay)((e=>{e.scripts[s]=[]}))),e((0,c.Ay)((e=>{e.scripts[s].push({name:"general",id:e.scripts[s].length,enable:!0})})));let r=t().scripts;return n.doAction("update_scripts",{scripts:r}).then((t=>(e({fetching:!1}),t))).catch((e=>{console.error(e)}))},saveScript:(s,r)=>{e({fetching:!0}),t().scripts[r]&&Array.isArray(t().scripts[r])||e((0,c.Ay)((e=>{e.scripts[r]=[]}))),e((0,c.Ay)((e=>{const t=e.scripts[r].findIndex((e=>e.id===s.id));-1!==t&&(e.scripts[r][t]=s)})));let a=t().scripts;return n.doAction("update_scripts",{scripts:a}).then((t=>(e({fetching:!1}),t))).catch((e=>{console.error(e)}))},deleteScript:(s,r)=>{e({fetching:!0}),t().scripts[r]&&Array.isArray(t().scripts[r])||e((0,c.Ay)((e=>{e.scripts[r]=[]}))),e((0,c.Ay)((e=>{const t=e.scripts[r].findIndex((e=>e.id===s.id));-1!==t&&e.scripts[r].splice(t,1)})));let a=t().scripts;return n.doAction("update_scripts",{scripts:a}).then((t=>(e({fetching:!1}),t))).catch((e=>{console.error(e)}))},updatePluginStatus:async(t,s)=>{e({fetching:!0}),e((0,c.Ay)((e=>{const r=e.plugins.findIndex((e=>e.id===t));-1!==r&&(e.plugins[r].enabled=s)})));const r=await n.doAction("update_plugin_status",{plugin:t,enabled:s}).then((e=>e)).catch((e=>{console.error(e)}));return e({fetching:!1}),r},updatePlaceholderStatus:async(t,s,r)=>{e({fetching:!0}),r&&e((0,c.Ay)((e=>{const r=e.plugins.findIndex((e=>e.id===t));-1!==r&&(e.plugins[r].placeholder=s?"enabled":"disabled")})));const a=await n.doAction("update_placeholder_status",{id:t,enabled:s}).then((e=>e)).catch((e=>{console.error(e)}));return e({fetching:!1}),a}}))),i=()=>n.doAction("get_integrations_data",{}).then((e=>e)).catch((e=>{console.error(e)}))},48033:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var r=s(27723),c=(s(10800),s(25228)),n=s(34759),a=s(82868),i=s(10790);const l=e=>{const{setScript:t,blockedScripts:s,fetching:l}=(0,n.default)(),d=s,o=e.script,p=e=>{if(!o.dependency||0===o.dependency.length)return"";let t=Object.entries(o.dependency);for(const[s,r]of t)if(s===e)return r;return""},u=(e,t)=>{let s={...e};for(const[e,r]of Object.entries(s))if(r===t){delete s[e];break}return s};let h=o.hasOwnProperty("urls")?Object.entries(o.urls):[""];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"cmplz-details-row cmplz-details-row__checkbox",children:(0,i.jsx)(a.default,{id:o.id+"dependency",disabled:l,value:o.enable_dependency,onChange:s=>(s=>{let r={...o};r.enable_dependency=s,t(r,e.type)})(s),options:{true:(0,r.__)("Enable dependency","complianz-gdpr")}})}),!!o.enable_dependency&&(0,i.jsxs)("div",{className:"cmplz-details-row cmplz-details-row",children:[h.length>1&&h.map((([s,n],a)=>(0,i.jsxs)("div",{className:"cmplz-scriptcenter-dependencies",children:[(0,i.jsx)(c.default,{disabled:l,value:p(n),options:u(d,n),onChange:s=>((s,r)=>{let c={...o},n={...c.dependency};n[r]=s,c.dependency=n,t(c,e.type)})(s,n)}),(0,i.jsxs)("div",{children:[(0,r.__)("waits for: ","complianz-gdpr"),n||(0,r.__)("Empty URL","complianz-gdpr")]})]},a))),h.length<=1&&(0,i.jsx)(i.Fragment,{children:(0,r.__)("Add a URL to create a dependency between two URLs","complianz-gdpr")})]})]})}},79758:(e,t,s)=>{s.r(t),s.d(t,{default:()=>p});var r=s(86087),c=s(9588),n=s(4219),a=s(52043),i=s(56427),l=s(99091),d=s(32828),o=s(10790);const p=(0,r.memo)((({type:e="action",style:t="tertiary",label:s,onClick:p,href:u="",target:h="",disabled:m,action:g,field:f,children:b})=>{if(!s&&!b)return null;const _=(f&&f.button_text?f.button_text:s)||b,{fetchFieldsData:y,showSavedSettingsNotice:x}=(0,n.default)(),{setInitialLoadCompleted:k,setProgress:j}=(0,l.UseCookieScanData)(),{setProgressLoaded:v}=(0,d.default)(),{selectedSubMenuItem:w}=(0,a.default)(),[A,C]=(0,r.useState)(!1),z=`button cmplz-button button--${t} button-${e}`,S=async e=>{await c.doAction(f.action,{}).then((e=>{e.success&&(y(w),"reset_settings"===e.id&&(k(!1),j(0),v(!1)),x(e.message))}))},N=f&&f.warn?f.warn:"";return"action"===e?(0,o.jsxs)(o.Fragment,{children:[i.__experimentalConfirmDialog&&(0,o.jsx)(i.__experimentalConfirmDialog,{isOpen:A,onConfirm:async()=>{C(!1),await S()},onCancel:()=>{C(!1)},children:N}),(0,o.jsx)("button",{className:z,onClick:async t=>{if("action"!==e||!p)return"action"===e&&g?i.__experimentalConfirmDialog?void(f&&f.warn?C(!0):await S()):void await S():void(window.location.href=f.url);p(t)},disabled:m,children:_})]}):"link"===e?(0,o.jsx)("a",{className:z,href:u,target:h,children:_}):void 0}))},82868:(e,t,s)=>{s.r(t),s.d(t,{default:()=>d});var r=s(92731),c=s(27723),n=s(45111),a=s(86087),i=s(79758),l=s(10790);const d=(0,a.memo)((({indeterminate:e,label:t,value:s,id:d,onChange:o,required:p,disabled:u,options:h={}})=>{const[m,g]=(0,a.useState)(!1),[f,b]=(0,a.useState)(!1);let _=s;Array.isArray(_)||(_=""===_?[]:[_]),(0,a.useEffect)((()=>{let e=1===Object.keys(h).length&&"true"===Object.keys(h)[0];g(e)}),[]),e&&(s=!0);const y=_;let x=!1;Object.keys(h).length>10&&(x=!0);const k=e=>m?s:y.includes(""+e)||y.includes(parseInt(e)),j=()=>{b(!f)};let v=u&&!Array.isArray(u);return 0===Object.keys(h).length?(0,l.jsx)(l.Fragment,{children:(0,c.__)("No options found","complianz-gdpr")}):(0,l.jsxs)("div",{className:"cmplz-checkbox-group",children:[Object.entries(h).map((([c,a],i)=>(0,l.jsxs)("div",{className:"cmplz-checkbox-group__item"+(!f&&i>9?" cmplz-hidden":""),children:[(0,l.jsx)(r.bL,{className:"cmplz-checkbox-group__checkbox",id:d+"_"+c,checked:k(c),"aria-label":t,disabled:v||Array.isArray(u)&&u.includes(c),required:p,onCheckedChange:e=>((e,t)=>{if(m)o(!s);else{const e=y.includes(""+t)||y.includes(parseInt(t))?y.filter((e=>e!==""+t&&e!==parseInt(t))):[...y,t];o(e)}})(0,c),children:(0,l.jsx)(r.C1,{className:"cmplz-checkbox-group__indicator",children:(0,l.jsx)(n.default,{name:e?"indeterminate":"check",size:14,color:"dark-blue"})})}),(0,l.jsx)("label",{className:"cmplz-checkbox-group__label",htmlFor:d+"_"+c,children:a})]},c))),!f&&x&&(0,l.jsx)(i.default,{onClick:()=>j(),children:(0,c.__)("Show more","complianz-gdpr")}),f&&x&&(0,l.jsx)(i.default,{onClick:()=>j(),children:(0,c.__)("Show less","complianz-gdpr")})]})}))},99091:(e,t,s)=>{s.r(t),s.d(t,{UseCookieScanData:()=>n});var r=s(81621),c=s(9588);const n=(0,r.vt)(((e,t)=>({initialLoadCompleted:!1,setInitialLoadCompleted:t=>e({initialLoadCompleted:t}),iframeLoaded:!1,loading:!1,nextPage:!1,progress:0,cookies:[],lastLoadedIframe:"",setIframeLoaded:t=>e({iframeLoaded:t}),setLastLoadedIframe:t=>e((e=>({lastLoadedIframe:t}))),setProgress:t=>e({progress:t}),fetchProgress:()=>(e({loading:!0}),c.doAction("get_scan_progress",{}).then((t=>(e({initialLoadCompleted:!0,loading:!1,nextPage:t.next_page,progress:t.progress,cookies:t.cookies}),t))))})))}}]);